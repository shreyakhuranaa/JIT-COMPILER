<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple Language Editor</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    textarea { width: 100%; height: 200px; font-family: monospace; font-size: 16px; }
    #output, #ast, #hotOps { white-space: pre; background: #eee; padding: 10px; margin-top: 10px; }
    .hot { background-color: #ffcccb; padding: 2px 6px; margin-right: 4px; border-radius: 4px; }
  </style>
</head>
<body>
  <h2>Simple Language Editor</h2>
  <textarea id="code" spellcheck="false">x = 2 + 3\ny = x + 4\nprint y</textarea><br />
  <button onclick="runCode()">Run</button>

  <h3>Output:</h3>
  <div id="output"></div>

  <h3>AST:</h3>
  <div id="ast"></div>

  <h3>Hot Operations:</h3>
  <div id="hotOps"></div>

  <script>
    async function runCode() {
      const code = document.getElementById("code").value;
      const response = await fetch("/run", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ code })
      });
      const data = await response.json();
      document.getElementById("output").textContent = data.output || "(no output)";
      document.getElementById("ast").textContent = JSON.stringify(data.ast, null, 2);
      const hotOpsDiv = document.getElementById("hotOps");
      if (data.hot_ops.length > 0) {
        hotOpsDiv.innerHTML = data.hot_ops.map(op => `<span class="hot">${op}</span>`).join(" ");
      } else {
        hotOpsDiv.textContent = "(no hot operations detected)";
      }
    }
  </script>
</body>
</html>
